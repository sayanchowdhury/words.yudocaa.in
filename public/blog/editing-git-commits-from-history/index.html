<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<title> Editing Git commits from history &middot; Intellectual Web </title>


<link rel="stylesheet" href="https://words.yudocaa.in/css/slim.css">
<link rel="stylesheet" href="https://words.yudocaa.in/css/highlight.min.css">
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro' rel='stylesheet' type='text/css'>

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/favicon.ico">


<link href="" rel="alternate" type="application/rss+xml" title="Intellectual Web" />

</head>

<body>
  <div class="container">
    <div class="header">
  <h1 class="site-title"><a href="https://words.yudocaa.in/">Intellectual Web</a></h1>
  <div class="nav">
    <a class="nav-btn" href="#">
      <span class="ci ci-burger"></span>
    </a>
  </div>
  <ul class="nav-list">
    <li><a href="/journal">Journal</a></li>
    <li><a href="/notes">Notes</a></li>
    <li><a href="/blog">Blogs</a></li>
  </ul>
</div>

    <div class="content">
      <div class="post">
        <h2 class="post-title"><a href="https://words.yudocaa.in/blog/editing-git-commits-from-history/">Editing Git commits from history</a></h2>
        <div class="post-content">
          <p>Let&rsquo;s say you&rsquo;ve raised a Pull Request on GitHub with 3 commits as shown below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">d46d2f8a <span style="color:#f92672">(</span>HEAD -&gt; feature, devel/feature<span style="color:#f92672">)</span> Add Fedora system to handle the Fedora Cloud images
f726b033 vendor: Add new dep github.com/ulikunitz/xz
dbdbda67 Split release and pre-release to handle multiple systems
</code></pre></div><p>Here, <code>d46d2f8a</code> is the <strong>HEAD,</strong> followed by <code>f726b033</code> and <code>dbdbda67</code>.</p>
<p>Your reviewers go through the commits, and suggest changes to some files. The suggestions now need to be applied to the commit <code>dbdbda67</code>. How would you fix this? This is a jam I usually land myself in, as for review I prefer my commits to be concise, shows incremental changes and for each commit to be atomic.</p>
<hr>
<p>There are two ways you can use to fix this issue:</p>
<h3 id="rebase-and-edit">Rebase and Edit</h3>
<p>I start off with <code>git rebase -i</code> which opens up the list of commits up for rebase. In our example here, the third commit from the HEAD needs to be changed, so I&rsquo;ll rebase commits till HEAD~3.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git rebase -i HEAD~3
</code></pre></div><p>This opens up the editor, with the options</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">pick dbdbda67 Split release and pre-release to handle multiple systems
pick f726b033 vendor: Add new dep github.com/ulikunitz/xz
pick d46d2f8a Add Fedora system to handle the Fedora Cloud images
</code></pre></div><p>Below this, you will find a list of commands you can use with git-rebase:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># p, pick &lt;commit&gt; = use commit</span>
<span style="color:#75715e"># r, reword &lt;commit&gt; = use commit, but edit the commit message</span>
<span style="color:#75715e"># e, edit &lt;commit&gt; = use commit, but stop for amending</span>
<span style="color:#75715e"># s, squash &lt;commit&gt; = use commit, but meld into previous commit</span>
<span style="color:#75715e"># f, fixup &lt;commit&gt; = like &#34;squash&#34;, but discard this commit&#39;s log message</span>
<span style="color:#75715e"># x, exec &lt;command&gt; = run command (the rest of the line) using shell</span>
<span style="color:#75715e"># d, drop &lt;commit&gt; = remove commit</span>
<span style="color:#75715e"># l, label &lt;label&gt; = label current HEAD with a name</span>
<span style="color:#75715e"># t, reset &lt;label&gt; = reset HEAD to a label</span>
<span style="color:#75715e"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span>
<span style="color:#75715e"># .       create a merge commit using the original merge commit&#39;s</span>
<span style="color:#75715e"># .       message (or the oneline, if no original merge commit was</span>
<span style="color:#75715e"># .       specified). Use -c &lt;commit&gt; to reword the commit message.</span>
</code></pre></div><p>The list is quite coherent, but for this post, we&rsquo;ll use the <code>edit</code> command. So replace <code>pick</code> with <code>edit</code> against the commit you would like to edit and exit the editor.</p>
<p>So for our example, it&rsquo;ll become (note the edit command in the first line):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">edit dbdbda67 Split release and pre-release to handle multiple systems
pick f726b033 vendor: Add new dep github.com/ulikunitz/xz
pick d46d2f8a Add Fedora system to handle the Fedora Cloud images

<span style="color:#75715e"># Rebase 51c8dc75..d46d2f8a onto 51c8dc75 (3 commands)</span>
#
<span style="color:#75715e"># Commands:</span>
<span style="color:#75715e"># p, pick &lt;commit&gt; = use commit</span>
<span style="color:#75715e"># r, reword &lt;commit&gt; = use commit, but edit the commit message</span>
<span style="color:#75715e"># e, edit &lt;commit&gt; = use commit, but stop for amending</span>
<span style="color:#75715e"># s, squash &lt;commit&gt; = use commit, but meld into previous commit</span>
<span style="color:#75715e"># f, fixup &lt;commit&gt; = like &#34;squash&#34;, but discard this commit&#39;s log message</span>
<span style="color:#75715e"># x, exec &lt;command&gt; = run command (the rest of the line) using shell</span>
<span style="color:#75715e"># d, drop &lt;commit&gt; = remove commit</span>
<span style="color:#75715e"># l, label &lt;label&gt; = label current HEAD with a name</span>
<span style="color:#75715e"># t, reset &lt;label&gt; = reset HEAD to a label</span>
<span style="color:#75715e"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span>
<span style="color:#75715e"># .       create a merge commit using the original merge commit&#39;s</span>
<span style="color:#75715e"># .       message (or the oneline, if no original merge commit was</span>
<span style="color:#75715e"># .       specified). Use -c &lt;commit&gt; to reword the commit message.</span>
#
<span style="color:#75715e"># These lines can be re-ordered; they are executed from top to bottom.</span>
#
<span style="color:#75715e"># If you remove a line here THAT COMMIT WILL BE LOST.</span>
#
<span style="color:#75715e">#       However, if you remove everything, the rebase will be aborted.</span>
#
#
<span style="color:#75715e"># Note that empty commits are commented out</span>
</code></pre></div><p>What this will do is stop the rebase process at the commit you wanted to edit. At this moment, you can go ahead and perform your changes. Add files, modify them, remove them etc.</p>
<p>Once you&rsquo;re done, add the files using <code>git add</code> and continue the rebase using:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git rebase --continue
</code></pre></div><hr>
<h3 id="the-other-way-rebase-and-fixup">The other way? Rebase and Fixup</h3>
<p>I&rsquo;ve recently started to use this method a whole lot more than the previous one I described. Here, you can just go ahead and do the changes.</p>
<p>Once done, pass the argument <code>--fixup</code>, while making the commit. For our example,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git commit --fixup<span style="color:#f92672">=</span>dbdbda67
</code></pre></div><p>This would create a fixup commit starting with <code>!fixup</code>. Next, go ahead and rebase the commits from the commit to be fixed to fixup commit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git rebase -i --autosquash dbdbda67~1
</code></pre></div><p>This will merge the fixup commit with the commit to be fixed.</p>
<p>Voila! Serve the PR while hot. üçú</p>
<hr>
<p>Do you know easier methods to tackle this issue? Drop me a message on Twitter <a href="https://twitter.com/yudocaa">@yudocaa</a>. I would like to thank <a href="https://twitter.com/jasonbraganza">Jason</a>, <a href="https://twitter.com/Jaysinhp">Jaysinh</a>, and <a href="https://twitter.com/sayani0_0">Sayani</a> who did proofreading for this blog post. Thanks to <a href="https://unsplash.com/@anniespratt">@anniespratt</a> for the cover image.</p>

        </div>
      </div>
    </div>
    <footer class="footer">
  <ul>
    <li><a href="/about">About</a></li>
    <li><a href="/tags">Tags</a></li>
     <li><a href="https://twitter.com/yudocaa">Twitter</a></li>
     <li><a href="https://facebook.com/yudocaa">Facebook</a></li>
     <li><a href="https://twitter.com/sayanchowdhury">Github</a></li>
  </ul>
  <p>Powered by <a href="https://gohugo.io">Hugo</a>. ¬© Sayan Chowdhury, 2020</p>
</footer>

  </div>
  <script src="https://words.yudocaa.in/js/slim.js"></script>
  

</body>

</html>